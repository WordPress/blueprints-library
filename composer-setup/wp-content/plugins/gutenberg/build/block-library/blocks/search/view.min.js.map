{"version":3,"file":"./build/block-library/blocks/search/view.min.js","mappings":"mBAAA,MAAM,EAA+BA,OAAW,GAAiB,eCK3D,QAAEC,IAAYC,EAAAA,EAAAA,OAAO,cAAe,CACzCC,MAAO,CACN,aAAIC,GACH,MAAM,qBACLC,EAAoB,mBACpBC,EAAkB,kBAClBC,IACGC,EAAAA,EAAAA,cACJ,OAAOH,EACJE,EACAD,CACJ,EACA,gBAAIG,GACH,MAAM,qBAAEJ,EAAoB,QAAEK,IAAYF,EAAAA,EAAAA,cAC1C,OAAOH,EAAuB,KAAOK,CACtC,EACA,QAAIC,GACH,MAAM,qBAAEN,IAAyBG,EAAAA,EAAAA,cACjC,OAAOH,EAAuB,SAAW,QAC1C,EACA,YAAIO,GACH,MAAM,qBAAEP,IAAyBG,EAAAA,EAAAA,cACjC,OAAOH,EAAuB,IAAM,IACrC,GAEDJ,QAAS,CACRY,eAAAA,CAAiBC,GAChB,MAAMC,GAAMP,EAAAA,EAAAA,eACN,IAAEQ,IAAQC,EAAAA,EAAAA,cACTF,EAAIV,uBACVS,EAAMI,iBACNH,EAAIV,sBAAuB,EAC3BW,EAAIG,cAAcC,cAAe,SAAUC,QAE7C,EACAC,gBAAAA,IACad,EAAAA,EAAAA,cACRH,sBAAuB,CAC5B,EACAkB,mBAAAA,CAAqBT,GACpB,MAAM,IAAEE,IAAQC,EAAAA,EAAAA,cAEI,WAAfH,GAAOU,MACXvB,EAAQqB,mBACRN,EAAII,cAAe,UAAWC,QAEhC,EACAI,oBAAAA,CAAsBX,GACrB,MAAM,IAAEE,IAAQC,EAAAA,EAAAA,cAObD,EAAIU,SAAUZ,EAAMa,gBACtBb,EAAMc,SAAW5B,OAAO6B,SAASC,eAEjC7B,EAAQqB,kBAEV,I","sources":["webpack://wp/external window [\"wp\",\"interactivity\"]","webpack://wp/./packages/block-library/build-module/search/@wordpress/block-library/src/search/view.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"interactivity\"];","/**\n * WordPress dependencies\n */\nimport { store, getContext, getElement } from '@wordpress/interactivity';\n\nconst { actions } = store( 'core/search', {\n\tstate: {\n\t\tget ariaLabel() {\n\t\t\tconst {\n\t\t\t\tisSearchInputVisible,\n\t\t\t\tariaLabelCollapsed,\n\t\t\t\tariaLabelExpanded,\n\t\t\t} = getContext();\n\t\t\treturn isSearchInputVisible\n\t\t\t\t? ariaLabelExpanded\n\t\t\t\t: ariaLabelCollapsed;\n\t\t},\n\t\tget ariaControls() {\n\t\t\tconst { isSearchInputVisible, inputId } = getContext();\n\t\t\treturn isSearchInputVisible ? null : inputId;\n\t\t},\n\t\tget type() {\n\t\t\tconst { isSearchInputVisible } = getContext();\n\t\t\treturn isSearchInputVisible ? 'submit' : 'button';\n\t\t},\n\t\tget tabindex() {\n\t\t\tconst { isSearchInputVisible } = getContext();\n\t\t\treturn isSearchInputVisible ? '0' : '-1';\n\t\t},\n\t},\n\tactions: {\n\t\topenSearchInput( event ) {\n\t\t\tconst ctx = getContext();\n\t\t\tconst { ref } = getElement();\n\t\t\tif ( ! ctx.isSearchInputVisible ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tctx.isSearchInputVisible = true;\n\t\t\t\tref.parentElement.querySelector( 'input' ).focus();\n\t\t\t}\n\t\t},\n\t\tcloseSearchInput() {\n\t\t\tconst ctx = getContext();\n\t\t\tctx.isSearchInputVisible = false;\n\t\t},\n\t\thandleSearchKeydown( event ) {\n\t\t\tconst { ref } = getElement();\n\t\t\t// If Escape close the menu.\n\t\t\tif ( event?.key === 'Escape' ) {\n\t\t\t\tactions.closeSearchInput();\n\t\t\t\tref.querySelector( 'button' ).focus();\n\t\t\t}\n\t\t},\n\t\thandleSearchFocusout( event ) {\n\t\t\tconst { ref } = getElement();\n\t\t\t// If focus is outside search form, and in the document, close menu\n\t\t\t// event.target === The element losing focus\n\t\t\t// event.relatedTarget === The element receiving focus (if any)\n\t\t\t// When focusout is outside the document,\n\t\t\t// `window.document.activeElement` doesn't change.\n\t\t\tif (\n\t\t\t\t! ref.contains( event.relatedTarget ) &&\n\t\t\t\tevent.target !== window.document.activeElement\n\t\t\t) {\n\t\t\t\tactions.closeSearchInput();\n\t\t\t}\n\t\t},\n\t},\n} );\n"],"names":["window","actions","store","state","ariaLabel","isSearchInputVisible","ariaLabelCollapsed","ariaLabelExpanded","getContext","ariaControls","inputId","type","tabindex","openSearchInput","event","ctx","ref","getElement","preventDefault","parentElement","querySelector","focus","closeSearchInput","handleSearchKeydown","key","handleSearchFocusout","contains","relatedTarget","target","document","activeElement"],"sourceRoot":""}