(()=>{var e={3849:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var i=r.apply(null,n);i&&e.push(i)}}else if("object"===s)if(n.toString===Object.prototype.toString)for(var l in n)o.call(n,l)&&n[l]&&e.push(l);else e.push(n.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},7608:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var i=r.apply(null,n);i&&e.push(i)}}else if("object"===s){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)o.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},2130:(e,t,n)=>{"use strict";var o=n(586);e.exports=function(e,t,n){n=n||{},9===t.nodeType&&(t=o.getWindow(t));var r=n.allowHorizontalScroll,s=n.onlyScrollIfNeeded,i=n.alignWithTop,l=n.alignWithLeft,a=n.offsetTop||0,c=n.offsetLeft||0,u=n.offsetBottom||0,d=n.offsetRight||0;r=void 0===r||r;var p=o.isWindow(t),f=o.offset(e),m=o.outerHeight(e),h=o.outerWidth(e),g=void 0,v=void 0,w=void 0,y=void 0,b=void 0,E=void 0,S=void 0,k=void 0,_=void 0,T=void 0;p?(S=t,T=o.height(S),_=o.width(S),k={left:o.scrollLeft(S),top:o.scrollTop(S)},b={left:f.left-k.left-c,top:f.top-k.top-a},E={left:f.left+h-(k.left+_)+d,top:f.top+m-(k.top+T)+u},y=k):(g=o.offset(t),v=t.clientHeight,w=t.clientWidth,y={left:t.scrollLeft,top:t.scrollTop},b={left:f.left-(g.left+(parseFloat(o.css(t,"borderLeftWidth"))||0))-c,top:f.top-(g.top+(parseFloat(o.css(t,"borderTopWidth"))||0))-a},E={left:f.left+h-(g.left+w+(parseFloat(o.css(t,"borderRightWidth"))||0))+d,top:f.top+m-(g.top+v+(parseFloat(o.css(t,"borderBottomWidth"))||0))+u}),b.top<0||E.top>0?!0===i?o.scrollTop(t,y.top+b.top):!1===i?o.scrollTop(t,y.top+E.top):b.top<0?o.scrollTop(t,y.top+b.top):o.scrollTop(t,y.top+E.top):s||((i=void 0===i||!!i)?o.scrollTop(t,y.top+b.top):o.scrollTop(t,y.top+E.top)),r&&(b.left<0||E.left>0?!0===l?o.scrollLeft(t,y.left+b.left):!1===l?o.scrollLeft(t,y.left+E.left):b.left<0?o.scrollLeft(t,y.left+b.left):o.scrollLeft(t,y.left+E.left):s||((l=void 0===l||!!l)?o.scrollLeft(t,y.left+b.left):o.scrollLeft(t,y.left+E.left)))}},2121:(e,t,n)=>{"use strict";e.exports=n(2130)},586:e=>{"use strict";var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function o(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],o="scroll"+(t?"Top":"Left");if("number"!=typeof n){var r=e.document;"number"!=typeof(n=r.documentElement[o])&&(n=r.body[o])}return n}function r(e){return o(e)}function s(e){return o(e,!0)}function i(e){var t=function(e){var t,n=void 0,o=void 0,r=e.ownerDocument,s=r.body,i=r&&r.documentElement;return n=(t=e.getBoundingClientRect()).left,o=t.top,{left:n-=i.clientLeft||s.clientLeft||0,top:o-=i.clientTop||s.clientTop||0}}(e),n=e.ownerDocument,o=n.defaultView||n.parentWindow;return t.left+=r(o),t.top+=s(o),t}var l=new RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i"),a=/^(top|right|bottom|left)$/,c="currentStyle",u="runtimeStyle",d="left",p=void 0;function f(e,t){for(var n=0;n<e.length;n++)t(e[n])}function m(e){return"border-box"===p(e,"boxSizing")}"undefined"!=typeof window&&(p=window.getComputedStyle?function(e,t,n){var o="",r=e.ownerDocument,s=n||r.defaultView.getComputedStyle(e,null);return s&&(o=s.getPropertyValue(t)||s[t]),o}:function(e,t){var n=e[c]&&e[c][t];if(l.test(n)&&!a.test(t)){var o=e.style,r=o[d],s=e[u][d];e[u][d]=e[c][d],o[d]="fontSize"===t?"1em":n||0,n=o.pixelLeft+"px",o[d]=r,e[u][d]=s}return""===n?"auto":n});var h=["margin","border","padding"],g=-1,v=2,w=1;function y(e,t,n){var o=0,r=void 0,s=void 0,i=void 0;for(s=0;s<t.length;s++)if(r=t[s])for(i=0;i<n.length;i++){var l;l="border"===r?r+n[i]+"Width":r+n[i],o+=parseFloat(p(e,l))||0}return o}function b(e){return null!=e&&e==e.window}var E={};function S(e,t,n){if(b(e))return"width"===t?E.viewportWidth(e):E.viewportHeight(e);if(9===e.nodeType)return"width"===t?E.docWidth(e):E.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],r="width"===t?e.offsetWidth:e.offsetHeight,s=(p(e),m(e)),i=0;(null==r||r<=0)&&(r=void 0,(null==(i=p(e,t))||Number(i)<0)&&(i=e.style[t]||0),i=parseFloat(i)||0),void 0===n&&(n=s?w:g);var l=void 0!==r||s,a=r||i;if(n===g)return l?a-y(e,["border","padding"],o):i;if(l){var c=n===v?-y(e,["border"],o):y(e,["margin"],o);return a+(n===w?0:c)}return i+y(e,h.slice(n),o)}f(["Width","Height"],(function(e){E["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],E["viewport"+e](n))},E["viewport"+e]=function(t){var n="client"+e,o=t.document,r=o.body,s=o.documentElement[n];return"CSS1Compat"===o.compatMode&&s||r&&r[n]||s}}));var k={position:"absolute",visibility:"hidden",display:"block"};function _(e){var t=void 0,n=arguments;return 0!==e.offsetWidth?t=S.apply(void 0,n):function(e,o,r){var s={},i=e.style,l=void 0;for(l in o)o.hasOwnProperty(l)&&(s[l]=i[l],i[l]=o[l]);for(l in function(){t=S.apply(void 0,n)}.call(e),o)o.hasOwnProperty(l)&&(i[l]=s[l])}(e,k),t}function T(e,t,o){var r=o;if("object"!==(void 0===t?"undefined":n(t)))return void 0!==r?("number"==typeof r&&(r+="px"),void(e.style[t]=r)):p(e,t);for(var s in t)t.hasOwnProperty(s)&&T(e,s,t[s])}f(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);E["outer"+t]=function(t,n){return t&&_(t,e,n?0:w)};var n="width"===e?["Left","Right"]:["Top","Bottom"];E[e]=function(t,o){return void 0===o?t&&_(t,e,g):t?(p(t),m(t)&&(o+=y(t,["padding","border"],n)),T(t,e,o)):void 0}})),e.exports=t({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(void 0===t)return i(e);!function(e,t){"static"===T(e,"position")&&(e.style.position="relative");var n=i(e),o={},r=void 0,s=void 0;for(s in t)t.hasOwnProperty(s)&&(r=parseFloat(T(e,s))||0,o[s]=r+t[s]-n[s]);T(e,o)}(e,t)},isWindow:b,each:f,css:T,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(e.overflow)for(var n in e)e.hasOwnProperty(n)&&(t.overflow[n]=e.overflow[n]);return t},scrollLeft:function(e,t){if(b(e)){if(void 0===t)return r(e);window.scrollTo(t,s(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(b(e)){if(void 0===t)return s(e);window.scrollTo(r(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},E)},8406:()=>{},2728:()=>{},6099:()=>{},9027:()=>{},2198:()=>{},8409:()=>{}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.element;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}const r=window.wp.i18n,s=window.wc.wcSettings;var i,l,a,c,u,d,p,f,m,h;const g=(0,s.getSetting)("wcBlocksConfig",{buildPhase:1,pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),v=g.pluginUrl+"assets/images/",w=(g.pluginUrl,g.buildPhase,null===(i=s.STORE_PAGES.shop)||void 0===i||i.permalink,null===(l=s.STORE_PAGES.checkout)||void 0===l||l.id,null===(a=s.STORE_PAGES.checkout)||void 0===a||a.permalink,null===(c=s.STORE_PAGES.privacy)||void 0===c||c.permalink,null===(u=s.STORE_PAGES.privacy)||void 0===u||u.title,null===(d=s.STORE_PAGES.terms)||void 0===d||d.permalink,null===(p=s.STORE_PAGES.terms)||void 0===p||p.title,null===(f=s.STORE_PAGES.cart)||void 0===f||f.id,null===(m=s.STORE_PAGES.cart)||void 0===m||m.permalink,null!==(h=s.STORE_PAGES.myaccount)&&void 0!==h&&h.permalink?s.STORE_PAGES.myaccount.permalink:(0,s.getSetting)("wpLoginUrl","/wp-login.php"),(0,s.getSetting)("localPickupEnabled",!1),(0,s.getSetting)("countries",{})),y=(0,s.getSetting)("countryData",{}),b=(Object.fromEntries(Object.keys(y).filter((e=>!0===y[e].allowBilling)).map((e=>[e,w[e]||""]))),Object.fromEntries(Object.keys(y).filter((e=>!0===y[e].allowBilling)).map((e=>[e,y[e].states||[]]))),Object.fromEntries(Object.keys(y).filter((e=>!0===y[e].allowShipping)).map((e=>[e,w[e]||""]))),Object.fromEntries(Object.keys(y).filter((e=>!0===y[e].allowShipping)).map((e=>[e,y[e].states||[]]))),Object.fromEntries(Object.keys(y).map((e=>[e,y[e].locale||[]]))),{address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],additional:[]}),E=((0,s.getSetting)("addressFieldsLocations",b).address,(0,s.getSetting)("addressFieldsLocations",b).contact,(0,s.getSetting)("addressFieldsLocations",b).additional,(0,s.getSetting)("additionalFields",{}),(0,s.getSetting)("additionalContactFields",{}),(0,s.getSetting)("additionalAddressFields",{}),({imageUrl:t=`${v}/block-error.svg`,header:n=(0,r.__)("Oops!","woocommerce"),text:o=(0,r.__)("There was an error loading the content.","woocommerce"),errorMessage:s,errorMessagePrefix:i=(0,r.__)("Error:","woocommerce"),button:l,showErrorBlock:a=!0})=>a?(0,e.createElement)("div",{className:"wc-block-error wc-block-components-error"},t&&(0,e.createElement)("img",{className:"wc-block-error__image wc-block-components-error__image",src:t,alt:""}),(0,e.createElement)("div",{className:"wc-block-error__content wc-block-components-error__content"},n&&(0,e.createElement)("p",{className:"wc-block-error__header wc-block-components-error__header"},n),o&&(0,e.createElement)("p",{className:"wc-block-error__text wc-block-components-error__text"},o),s&&(0,e.createElement)("p",{className:"wc-block-error__message wc-block-components-error__message"},i?i+" ":"",s),l&&(0,e.createElement)("p",{className:"wc-block-error__button wc-block-components-error__button"},l))):null);n(8406);class S extends t.Component{constructor(...e){var t,n,r;super(...e),t=this,r={errorMessage:"",hasError:!1},(n=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}(n="state"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}static getDerivedStateFromError(t){return void 0!==t.statusText&&void 0!==t.status?{errorMessage:(0,e.createElement)(e.Fragment,null,(0,e.createElement)("strong",null,t.status),":Â ",t.statusText),hasError:!0}:{errorMessage:t.message,hasError:!0}}render(){const{header:t,imageUrl:n,showErrorMessage:o=!0,showErrorBlock:r=!0,text:s,errorMessagePrefix:i,renderError:l,button:a}=this.props,{errorMessage:c,hasError:u}=this.state;return u?"function"==typeof l?l({errorMessage:c}):(0,e.createElement)(E,{showErrorBlock:r,errorMessage:o?c:null,header:t,imageUrl:n,text:s,errorMessagePrefix:i,button:a}):this.props.children}}const k=S,_=[".wp-block-woocommerce-cart"],T=({Block:n,containers:o,getProps:r=(()=>({})),getErrorBoundaryProps:s=(()=>({}))})=>{0!==o.length&&Array.prototype.forEach.call(o,((o,i)=>{const l=r(o,i),a=s(o,i),c={...o.dataset,...l.attributes||{}};(({Block:n,container:o,attributes:r={},props:s={},errorBoundaryProps:i={}})=>{(0,t.render)((0,e.createElement)(k,{...i},(0,e.createElement)(t.Suspense,{fallback:(0,e.createElement)("div",{className:"wc-block-placeholder"})},n&&(0,e.createElement)(n,{...s,attributes:r}))),o,(()=>{o.classList&&o.classList.remove("is-loading")}))})({Block:n,container:o,props:l,attributes:c,errorBoundaryProps:a})}))},x=window.wp.a11y,C=(0,t.forwardRef)((function({icon:e,size:n=24,...o},r){return(0,t.cloneElement)(e,{width:n,height:n,...o,ref:r})})),I=window.wp.primitives,L=(0,e.createElement)(I.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(I.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));var R=n(3849),A=n.n(R);n(2198);const P=({className:t,rating:n,ratedProductsCount:o})=>{const s=A()("wc-block-components-product-rating",t),i={width:n/5*100+"%"},l=(0,r.sprintf)(/* translators: %f is referring to the average rating value */ /* translators: %f is referring to the average rating value */
(0,r.__)("Rated %f out of 5","woocommerce"),n),a={__html:(0,r.sprintf)(/* translators: %s is the rating value wrapped in HTML strong tags. */ /* translators: %s is the rating value wrapped in HTML strong tags. */
(0,r.__)("Rated %s out of 5","woocommerce"),(0,r.sprintf)('<strong class="rating">%f</strong>',n))};return(0,e.createElement)("div",{className:s},(0,e.createElement)("div",{className:"wc-block-components-product-rating__stars",role:"img","aria-label":l},(0,e.createElement)("span",{style:i,dangerouslySetInnerHTML:a})),null!==o?(0,e.createElement)("span",{className:"wc-block-components-product-rating-count"},"(",o,")"):null)},O=window.wp.isShallowEqual;var F=n.n(O);function M(e){const n=(0,t.useRef)(e);return F()(e,n.current)||(n.current=e),n.current}const N=window.wc.wcBlocksData,B=window.wp.data,D=(0,t.createContext)("page"),V=()=>(0,t.useContext)(D),W=(D.Provider,e=>{const n=V();e=e||n;const o=(0,B.useSelect)((t=>t(N.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:r}=(0,B.useDispatch)(N.QUERY_STATE_STORE_KEY);return[o,(0,t.useCallback)((t=>{r(e,t)}),[e,r])]}),H=(e,n,o)=>{const r=V();o=o||r;const s=(0,B.useSelect)((t=>t(N.QUERY_STATE_STORE_KEY).getValueForQueryKey(o,e,n)),[o,e]),{setQueryValue:i}=(0,B.useDispatch)(N.QUERY_STATE_STORE_KEY);return[s,(0,t.useCallback)((t=>{i(o,e,t)}),[o,e,i])]};function j(e,t){return e===t}function z(e){return"function"==typeof e?function(){return e}:e}const K=e=>!(e=>null===e)(e)&&e instanceof Object&&e.constructor===Object;function U(e,t){return K(e)&&t in e}var q=function(e){return function(t,n,o){return e(t,n,o)*o}},$=function(e,t){if(e)throw Error("Invalid sort config: "+t)},G=function(e){var t=e||{},n=t.asc,o=t.desc,r=n?1:-1,s=n||o;return $(!s,"Expected `asc` or `desc` property"),$(n&&o,"Ambiguous object with `asc` and `desc` config properties"),{order:r,sortBy:s,comparer:e.comparer&&q(e.comparer)}};function Q(e,t,n){if(void 0===e||!0===e)return function(e,o){return t(e,o,n)};if("string"==typeof e)return $(e.includes("."),"String syntax not allowed for nested properties."),function(o,r){return t(o[e],r[e],n)};if("function"==typeof e)return function(o,r){return t(e(o),e(r),n)};if(Array.isArray(e)){var o=function(e){return function t(n,o,r,s,i,l,a){var c,u;if("string"==typeof n)c=l[n],u=a[n];else{if("function"!=typeof n){var d=G(n);return t(d.sortBy,o,r,d.order,d.comparer||e,l,a)}c=n(l),u=n(a)}var p=i(c,u,s);return(0===p||null==c&&null==u)&&o.length>r?t(o[r],o,r+1,s,i,l,a):p}}(t);return function(r,s){return o(e[0],e,1,n,t,r,s)}}var r=G(e);return Q(r.sortBy,r.comparer||t,r.order)}var Y=function(e,t,n,o){return Array.isArray(t)?(Array.isArray(n)&&n.length<2&&(n=n[0]),t.sort(Q(n,o,e))):t};function Z(e){var t=q(e.comparer);return function(n){var o=Array.isArray(n)&&!e.inPlaceSorting?n.slice():n;return{asc:function(e){return Y(1,o,e,t)},desc:function(e){return Y(-1,o,e,t)},by:function(e){return Y(1,o,e,t)}}}}var X=function(e,t,n){return null==e?n:null==t?-n:typeof e!=typeof t?typeof e<typeof t?-1:1:e<t?-1:e>t?1:0},J=Z({comparer:X});Z({comparer:X,inPlaceSorting:!0});const ee=({queryAttribute:n,queryPrices:o,queryStock:r,queryRating:s,queryState:i,isEditor:l=!1})=>{let a=V();a=`${a}-collection-data`;const[c]=W(a),[u,d]=H("calculate_attribute_counts",[],a),[p,f]=H("calculate_price_range",null,a),[m,h]=H("calculate_stock_status_counts",null,a),[g,v]=H("calculate_rating_counts",null,a),w=M(n||{}),y=M(o),b=M(r),E=M(s);(0,t.useEffect)((()=>{"object"==typeof w&&Object.keys(w).length&&(u.find((e=>U(w,"taxonomy")&&e.taxonomy===w.taxonomy))||d([...u,w]))}),[w,u,d]),(0,t.useEffect)((()=>{p!==y&&void 0!==y&&f(y)}),[y,f,p]),(0,t.useEffect)((()=>{m!==b&&void 0!==b&&h(b)}),[b,h,m]),(0,t.useEffect)((()=>{g!==E&&void 0!==E&&v(E)}),[E,v,g]);const[S,k]=(0,t.useState)(l),[_]=(T=S,L=j,C=(0,e.useState)(z(T)),I=C[1],R=[C[0],(0,e.useCallback)((function(e){return I(z(e))}),[])],A=R[0],P=R[1],O=function(t,n,o){var r=this,s=(0,e.useRef)(null),i=(0,e.useRef)(0),l=(0,e.useRef)(null),a=(0,e.useRef)([]),c=(0,e.useRef)(),u=(0,e.useRef)(),d=(0,e.useRef)(t),p=(0,e.useRef)(!0);(0,e.useEffect)((function(){d.current=t}),[t]);var f=!n&&0!==n&&"undefined"!=typeof window;if("function"!=typeof t)throw new TypeError("Expected a function");n=+n||0;var m=!!(o=o||{}).leading,h=!("trailing"in o)||!!o.trailing,g="maxWait"in o,v=g?Math.max(+o.maxWait||0,n):null;(0,e.useEffect)((function(){return p.current=!0,function(){p.current=!1}}),[]);var w=(0,e.useMemo)((function(){var e=function(e){var t=a.current,n=c.current;return a.current=c.current=null,i.current=e,u.current=d.current.apply(n,t)},t=function(e,t){f&&cancelAnimationFrame(l.current),l.current=f?requestAnimationFrame(e):setTimeout(e,t)},o=function(e){if(!p.current)return!1;var t=e-s.current;return!s.current||t>=n||t<0||g&&e-i.current>=v},w=function(t){return l.current=null,h&&a.current?e(t):(a.current=c.current=null,u.current)},y=function e(){var r=Date.now();if(o(r))return w(r);if(p.current){var l=n-(r-s.current),a=g?Math.min(l,v-(r-i.current)):l;t(e,a)}},b=function(){var d=Date.now(),f=o(d);if(a.current=[].slice.call(arguments),c.current=r,s.current=d,f){if(!l.current&&p.current)return i.current=s.current,t(y,n),m?e(s.current):u.current;if(g)return t(y,n),e(s.current)}return l.current||t(y,n),u.current};return b.cancel=function(){l.current&&(f?cancelAnimationFrame(l.current):clearTimeout(l.current)),i.current=0,a.current=s.current=c.current=l.current=null},b.isPending=function(){return!!l.current},b.flush=function(){return l.current?w(Date.now()):u.current},b}),[m,g,n,v,h,f]);return w}((0,e.useCallback)((function(e){return P(e)}),[P]),200,x),F=(0,e.useRef)(T),L(F.current,T)||(O(T),F.current=T),[A,O]);var T,x,C,I,L,R,A,P,O,F;S||k(!0);const D=(0,t.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=J(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(c)),[c]);return(e=>{const{namespace:n,resourceName:o,resourceValues:r=[],query:s={},shouldSelect:i=!0}=e;if(!n||!o)throw new Error("The options object must have valid values for the namespace and the resource properties.");const l=(0,t.useRef)({results:[],isLoading:!0}),a=M(s),c=M(r),u=(()=>{const[,e]=(0,t.useState)();return(0,t.useCallback)((t=>{e((()=>{throw t}))}),[])})(),d=(0,B.useSelect)((e=>{if(!i)return null;const t=e(N.COLLECTIONS_STORE_KEY),r=[n,o,a,c],s=t.getCollectionError(...r);if(s){if(!(s instanceof Error))throw new Error("TypeError: `error` object is not an instance of Error constructor");u(s)}return{results:t.getCollection(...r),isLoading:!t.hasFinishedResolution("getCollection",r)}}),[n,o,c,a,i]);return null!==d&&(l.current=d),l.current})({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...i,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...D},shouldSelect:_})},te=e=>"boolean"==typeof e,ne=window.wc.blocksComponents;n(6099);const oe=({className:t,isLoading:n,disabled:o,
/* translators: Submit button text for filters. */
label:s=(0,r.__)("Apply","woocommerce"),onClick:i,screenReaderLabel:l=(0,r.__)("Apply filter","woocommerce")})=>(0,e.createElement)("button",{type:"submit",className:A()("wp-block-button__link","wc-block-filter-submit-button","wc-block-components-filter-submit-button",{"is-loading":n},t),disabled:o,onClick:i},(0,e.createElement)(ne.Label,{label:s,screenReaderLabel:l}));n(2728);const re=({className:t,
/* translators: Reset button text for filters. */
label:n=(0,r.__)("Reset","woocommerce"),onClick:o,screenReaderLabel:s=(0,r.__)("Reset filter","woocommerce")})=>(0,e.createElement)("button",{className:A()("wc-block-components-filter-reset-button",t),onClick:o},(0,e.createElement)(ne.Label,{label:n,screenReaderLabel:s})),se=window.lodash;var ie=n(7608),le=n.n(ie);const ae=window.wp.compose,ce=window.wp.keycodes,ue=(0,t.createElement)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(I.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}));function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},de.apply(this,arguments)}const pe=window.wp.deprecated;var fe=n.n(pe);const me=window.wp.dom,he=(0,t.createElement)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(I.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"}));function ge(e,t,n){const{defaultView:o}=t,{frameElement:r}=o;if(!r||t===n.ownerDocument)return e;const s=r.getBoundingClientRect();return new o.DOMRect(e.left+s.left,e.top+s.top,e.width,e.height)}let ve=0;function we(e){const t=document.scrollingElement||document.body;e&&(ve=t.scrollTop);const n=e?"add":"remove";t.classList[n]("lockscroll"),document.documentElement.classList[n]("lockscroll"),e||(t.scrollTop=ve)}let ye=0;function be(){return(0,t.useEffect)((()=>(0===ye&&we(!0),++ye,()=>{1===ye&&we(!1),--ye})),[]),null}window.wp.warning;const Ee=(0,t.createContext)({slots:{},fills:{},registerSlot:()=>{"undefined"!=typeof process&&process.env},updateSlot:()=>{},unregisterSlot:()=>{},registerFill:()=>{},unregisterFill:()=>{}});function Se(e){const n=(0,t.useContext)(Ee),o=n.slots[e]||{},r=n.fills[e],s=(0,t.useMemo)((()=>r||[]),[r]);return{...o,updateSlot:(0,t.useCallback)((t=>{n.updateSlot(e,t)}),[e,n.updateSlot]),unregisterSlot:(0,t.useCallback)((t=>{n.unregisterSlot(e,t)}),[e,n.unregisterSlot]),fills:s,registerFill:(0,t.useCallback)((t=>{n.registerFill(e,t)}),[e,n.registerFill]),unregisterFill:(0,t.useCallback)((t=>{n.unregisterFill(e,t)}),[e,n.unregisterFill])}}const ke=(0,t.createContext)({registerSlot:()=>{},unregisterSlot:()=>{},registerFill:()=>{},unregisterFill:()=>{},getSlot:()=>{},getFills:()=>{},subscribe:()=>{}});function _e({name:e,children:n,registerFill:o,unregisterFill:r}){const s=(e=>{const{getSlot:n,subscribe:o}=(0,t.useContext)(ke),[r,s]=(0,t.useState)(n(e));return(0,t.useEffect)((()=>(s(n(e)),o((()=>{s(n(e))})))),[e]),r})(e),i=(0,t.useRef)({name:e,children:n});return(0,t.useLayoutEffect)((()=>(o(e,i.current),()=>r(e,i.current))),[]),(0,t.useLayoutEffect)((()=>{i.current.children=n,s&&s.forceUpdate()}),[n]),(0,t.useLayoutEffect)((()=>{e!==i.current.name&&(r(i.current.name,i.current),i.current.name=e,o(e,i.current))}),[e]),s&&s.node?((0,se.isFunction)(n)&&(n=n(s.props.fillProps)),(0,t.createPortal)(n,s.node)):null}const Te=e=>(0,t.createElement)(ke.Consumer,null,(({registerFill:n,unregisterFill:o})=>(0,t.createElement)(_e,de({},e,{registerFill:n,unregisterFill:o}))));class xe extends t.Component{constructor(){super(...arguments),this.isUnmounted=!1,this.bindNode=this.bindNode.bind(this)}componentDidMount(){const{registerSlot:e}=this.props;e(this.props.name,this)}componentWillUnmount(){const{unregisterSlot:e}=this.props;this.isUnmounted=!0,e(this.props.name,this)}componentDidUpdate(e){const{name:t,unregisterSlot:n,registerSlot:o}=this.props;e.name!==t&&(n(e.name),o(t,this))}bindNode(e){this.node=e}forceUpdate(){this.isUnmounted||super.forceUpdate()}render(){const{children:e,name:n,fillProps:o={},getFills:r}=this.props,s=(0,se.map)(r(n,this),(e=>{const n=(0,se.isFunction)(e.children)?e.children(o):e.children;return t.Children.map(n,((e,n)=>{if(!e||(0,se.isString)(e))return e;const o=e.key||n;return(0,t.cloneElement)(e,{key:o})}))})).filter((0,se.negate)(t.isEmptyElement));return(0,t.createElement)(t.Fragment,null,(0,se.isFunction)(e)?e(s):s)}}const Ce=e=>(0,t.createElement)(ke.Consumer,null,(({registerSlot:n,unregisterSlot:o,getFills:r})=>(0,t.createElement)(xe,de({},e,{registerSlot:n,unregisterSlot:o,getFills:r}))));function Ie(){const[,e]=(0,t.useState)({}),n=(0,t.useRef)(!0);return(0,t.useEffect)((()=>()=>{n.current=!1}),[]),()=>{n.current&&e({})}}function Le({name:e,children:n}){const o=Se(e),r=(0,t.useRef)({rerender:Ie()});return(0,t.useEffect)((()=>(o.registerFill(r),()=>{o.unregisterFill(r)})),[o.registerFill,o.unregisterFill]),o.ref&&o.ref.current?("function"==typeof n&&(n=n(o.fillProps)),(0,t.createPortal)(n,o.ref.current)):null}const Re=(0,t.forwardRef)((function({name:e,fillProps:n={},as:o="div",...r},s){const i=(0,t.useContext)(Ee),l=(0,t.useRef)();return(0,t.useLayoutEffect)((()=>(i.registerSlot(e,l,n),()=>{i.unregisterSlot(e,l)})),[i.registerSlot,i.unregisterSlot,e]),(0,t.useLayoutEffect)((()=>{i.updateSlot(e,n)})),(0,t.createElement)(o,de({ref:(0,ae.useMergeRefs)([s,l])},r))}));function Ae(e){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(Te,e),(0,t.createElement)(Le,e))}const Pe=(0,t.forwardRef)((({bubblesVirtually:e,...n},o)=>e?(0,t.createElement)(Re,de({},n,{ref:o})):(0,t.createElement)(Ce,n)));function Oe(e){return"appear"===e?"top":"left"}const Fe="Popover";function Me(e,t){const{paddingTop:n,paddingBottom:o,paddingLeft:r,paddingRight:s}=(i=t).ownerDocument.defaultView.getComputedStyle(i);var i;const l=n?parseInt(n,10):0,a=o?parseInt(o,10):0,c=r?parseInt(r,10):0,u=s?parseInt(s,10):0;return{x:e.left+c,y:e.top+l,width:e.width-c-u,height:e.height-l-a,left:e.left+c,right:e.right-u,top:e.top+l,bottom:e.bottom-a}}function Ne(e,t,n){n?e.getAttribute(t)!==n&&e.setAttribute(t,n):e.hasAttribute(t)&&e.removeAttribute(t)}function Be(e,t,n=""){e.style[t]!==n&&(e.style[t]=n)}function De(e,t,n){n?e.classList.contains(t)||e.classList.add(t):e.classList.contains(t)&&e.classList.remove(t)}const Ve=(0,t.forwardRef)((({headerTitle:e,onClose:n,children:o,className:s,noArrow:i=!0,isAlternate:l,position:a="bottom right",range:c,focusOnMount:u="firstElement",anchorRef:d,shouldAnchorIncludePadding:p,anchorRect:f,getAnchorRect:m,expandOnMobile:h,animate:g=!0,onClickOutside:v,onFocusOutside:w,__unstableStickyBoundaryElement:y,__unstableSlotName:b=Fe,__unstableObserveElement:E,__unstableBoundaryParent:S,__unstableForcePosition:k,__unstableForceXAlignment:_,...T},x)=>{const C=(0,t.useRef)(null),I=(0,t.useRef)(null),L=(0,t.useRef)(),R=(0,ae.useViewportMatch)("medium","<"),[A,P]=(0,t.useState)(),O=Se(b),F=h&&R,[M,N]=(0,ae.useResizeObserver)();i=F||i,(0,t.useLayoutEffect)((()=>{if(F)return De(L.current,"is-without-arrow",i),De(L.current,"is-alternate",l),Ne(L.current,"data-x-axis"),Ne(L.current,"data-y-axis"),Be(L.current,"top"),Be(L.current,"left"),Be(I.current,"maxHeight"),void Be(I.current,"maxWidth");const e=()=>{if(!L.current||!I.current)return;let e=function(e,t,n,o=!1,r,s){if(t)return t;if(n){if(!e.current)return;const t=n(e.current);return ge(t,t.ownerDocument||e.current.ownerDocument,s)}if(!1!==o){if(!(o&&window.Range&&window.Element&&window.DOMRect))return;if("function"==typeof(null==o?void 0:o.cloneRange))return ge((0,me.getRectangleFromRange)(o),o.endContainer.ownerDocument,s);if("function"==typeof(null==o?void 0:o.getBoundingClientRect)){const e=ge(o.getBoundingClientRect(),o.ownerDocument,s);return r?e:Me(e,o)}const{top:e,bottom:t}=o,n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),l=ge(new window.DOMRect(n.left,n.top,n.width,i.bottom-n.top),e.ownerDocument,s);return r?l:Me(l,o)}if(!e.current)return;const{parentNode:i}=e.current,l=i.getBoundingClientRect();return r?l:Me(l,i)}(C,f,m,d,p,L.current);if(!e)return;const{offsetParent:t,ownerDocument:n}=L.current;let o,s=0;if(t&&t!==n.body){const n=t.getBoundingClientRect();s=n.top,e=new window.DOMRect(e.left-n.left,e.top-n.top,e.width,e.height)}var c;S&&(o=null===(c=L.current.closest(".popover-slot"))||void 0===c?void 0:c.parentNode);const u=N.height?N:I.current.getBoundingClientRect(),{popoverTop:h,popoverLeft:g,xAxis:v,yAxis:w,contentHeight:b,contentWidth:E}=function(e,t,n="top",o,s,i,l,a,c){const[u,d="center",p]=n.split(" "),f=function(e,t,n,o,r,s,i,l){const{height:a}=t;if(r){const t=r.getBoundingClientRect().top+a-i;if(e.top<=t)return{yAxis:n,popoverTop:Math.min(e.bottom,t)}}let c=e.top+e.height/2;"bottom"===o?c=e.bottom:"top"===o&&(c=e.top);const u={popoverTop:c,contentHeight:(c-a/2>0?a/2:c)+(c+a/2>window.innerHeight?window.innerHeight-c:a/2)},d={popoverTop:e.top,contentHeight:e.top-10-a>0?a:e.top-10},p={popoverTop:e.bottom,contentHeight:e.bottom+10+a>window.innerHeight?window.innerHeight-10-e.bottom:a};let f,m=n,h=null;if(!r&&!l)if("middle"===n&&u.contentHeight===a)m="middle";else if("top"===n&&d.contentHeight===a)m="top";else if("bottom"===n&&p.contentHeight===a)m="bottom";else{m=d.contentHeight>p.contentHeight?"top":"bottom";const e="top"===m?d.contentHeight:p.contentHeight;h=e!==a?e:null}return f="middle"===m?u.popoverTop:"top"===m?d.popoverTop:p.popoverTop,{yAxis:m,popoverTop:f,contentHeight:h}}(e,t,u,p,o,0,i,a),m=function(e,t,n,o,s,i,l,a,c){const{width:u}=t;"left"===n&&(0,r.isRTL)()?n="right":"right"===n&&(0,r.isRTL)()&&(n="left"),"left"===o&&(0,r.isRTL)()?o="right":"right"===o&&(0,r.isRTL)()&&(o="left");const d=Math.round(e.left+e.width/2),p={popoverLeft:d,contentWidth:(d-u/2>0?u/2:d)+(d+u/2>window.innerWidth?window.innerWidth-d:u/2)};let f=e.left;"right"===o?f=e.right:"middle"===i||c||(f=d);let m=e.right;"left"===o?m=e.left:"middle"===i||c||(m=d);const h={popoverLeft:f,contentWidth:f-u>0?u:f},g={popoverLeft:m,contentWidth:m+u>window.innerWidth?window.innerWidth-m:u};let v,w=n,y=null;if(!s&&!a)if("center"===n&&p.contentWidth===u)w="center";else if("left"===n&&h.contentWidth===u)w="left";else if("right"===n&&g.contentWidth===u)w="right";else{w=h.contentWidth>g.contentWidth?"left":"right";const e="left"===w?h.contentWidth:g.contentWidth;u>window.innerWidth&&(y=window.innerWidth),e!==u&&(w="center",p.popoverLeft=window.innerWidth/2)}if(v="center"===w?p.popoverLeft:"left"===w?h.popoverLeft:g.popoverLeft,l){const e=l.getBoundingClientRect();v=Math.min(v,e.right-u),(0,r.isRTL)()||(v=Math.max(v,0))}return{xAxis:w,popoverLeft:v,contentWidth:y}}(e,t,d,p,o,f.yAxis,l,a,c);return{...m,...f}}(e,u,a,y,L.current,s,o,k,_);"number"==typeof h&&"number"==typeof g&&(Be(L.current,"top",h+"px"),Be(L.current,"left",g+"px")),De(L.current,"is-without-arrow",i||"center"===v&&"middle"===w),De(L.current,"is-alternate",l),Ne(L.current,"data-x-axis",v),Ne(L.current,"data-y-axis",w),Be(I.current,"maxHeight","number"==typeof b?b+"px":""),Be(I.current,"maxWidth","number"==typeof E?E+"px":""),P(({left:"right",right:"left"}[v]||"center")+" "+({top:"bottom",bottom:"top"}[w]||"middle"))};e();const{ownerDocument:t}=L.current,{defaultView:n}=t,o=n.setInterval(e,500);let s;const c=()=>{n.cancelAnimationFrame(s),s=n.requestAnimationFrame(e)};n.addEventListener("click",c),n.addEventListener("resize",e),n.addEventListener("scroll",e,!0);const u=function(e){if(e)return e.endContainer?e.endContainer.ownerDocument:e.top?e.top.ownerDocument:e.ownerDocument}(d);let h;return u&&u!==t&&(u.defaultView.addEventListener("resize",e),u.defaultView.addEventListener("scroll",e,!0)),E&&(h=new n.MutationObserver(e),h.observe(E,{attributes:!0})),()=>{n.clearInterval(o),n.removeEventListener("resize",e),n.removeEventListener("scroll",e,!0),n.removeEventListener("click",c),n.cancelAnimationFrame(s),u&&u!==t&&(u.defaultView.removeEventListener("resize",e),u.defaultView.removeEventListener("scroll",e,!0)),h&&h.disconnect()}}),[F,f,m,d,p,a,N,y,E,S]);const B=(e,t)=>{if("focus-outside"===e&&w)w(t);else if("focus-outside"===e&&v){const e=new window.MouseEvent("click");Object.defineProperty(e,"target",{get:()=>t.relatedTarget}),fe()("Popover onClickOutside prop",{since:"5.3",alternative:"onFocusOutside"}),v(e)}else n&&n()},[D,V]=(0,ae.__experimentalUseDialog)({focusOnMount:u,__unstableOnClose:B,onClose:B}),W=(0,ae.useMergeRefs)([L,D,x]),H=Boolean(g&&A)&&function(e){if("loading"===e.type)return le()("components-animate__loading");const{type:t,origin:n=Oe(t)}=e;if("appear"===t){const[e,t="center"]=n.split(" ");return le()("components-animate__appear",{["is-from-"+t]:"center"!==t,["is-from-"+e]:"middle"!==e})}return"slide-in"===t?le()("components-animate__slide-in","is-from-"+n):void 0}({type:"appear",origin:A});let j=(0,t.createElement)("div",de({className:le()("components-popover",s,H,{"is-expanded":F,"is-without-arrow":i,"is-alternate":l})},T,{ref:W},V,{tabIndex:"-1"}),F&&(0,t.createElement)(be,null),F&&(0,t.createElement)("div",{className:"components-popover__header"},(0,t.createElement)("span",{className:"components-popover__header-title"},e),(0,t.createElement)(Ze,{className:"components-popover__close",icon:he,onClick:n})),(0,t.createElement)("div",{ref:I,className:"components-popover__content"},(0,t.createElement)("div",{style:{position:"relative"}},M,o)));return O.ref&&(j=(0,t.createElement)(Ae,{name:b},j)),d||f?j:(0,t.createElement)("span",{ref:C},j)}));Ve.Slot=(0,t.forwardRef)((function({name:e=Fe},n){return(0,t.createElement)(Pe,{bubblesVirtually:!0,name:e,className:"popover-slot",ref:n})}));const We=Ve,He=function({shortcut:e,className:n}){if(!e)return null;let o,r;return(0,se.isString)(e)&&(o=e),(0,se.isObject)(e)&&(o=e.display,r=e.ariaLabel),(0,t.createElement)("span",{className:n,"aria-label":r},o)},je=(0,t.createElement)("div",{className:"event-catcher"}),ze=({eventHandlers:e,child:n,childrenWithPopover:o})=>(0,t.cloneElement)((0,t.createElement)("span",{className:"disabled-element-wrapper"},(0,t.cloneElement)(je,e),(0,t.cloneElement)(n,{children:o}),","),e),Ke=({child:e,eventHandlers:n,childrenWithPopover:o})=>(0,t.cloneElement)(e,{...n,children:o}),Ue=(e,n,o)=>{if(1!==t.Children.count(e))return;const r=t.Children.only(e);"function"==typeof r.props[n]&&r.props[n](o)},qe=function({children:e,position:n,text:o,shortcut:r}){const[s,i]=(0,t.useState)(!1),[l,a]=(0,t.useState)(!1),c=(0,ae.useDebounce)(a,700),u=t=>{Ue(e,"onMouseDown",t),document.addEventListener("mouseup",f),i(!0)},d=t=>{Ue(e,"onMouseUp",t),document.removeEventListener("mouseup",f),i(!1)},p=e=>"mouseUp"===e?d:"mouseDown"===e?u:void 0,f=p("mouseUp"),m=(t,n)=>o=>{if(Ue(e,t,o),o.currentTarget.disabled)return;if("focus"===o.type&&s)return;c.cancel();const r=(0,se.includes)(["focus","mouseenter"],o.type);r!==l&&(n?c(r):a(r))},h=()=>{c.cancel(),document.removeEventListener("mouseup",f)};if((0,t.useEffect)((()=>h),[]),1!==t.Children.count(e))return e;const g={onMouseEnter:m("onMouseEnter",!0),onMouseLeave:m("onMouseLeave"),onClick:m("onClick"),onFocus:m("onFocus"),onBlur:m("onBlur"),onMouseDown:p("mouseDown")},v=t.Children.only(e),{children:w,disabled:y}=v.props,b=y?ze:Ke,E=(({grandchildren:e,isOver:n,position:o,text:r,shortcut:s})=>(0,t.concatChildren)(e,n&&(0,t.createElement)(We,{focusOnMount:!1,position:o,className:"components-tooltip","aria-hidden":"true",animate:!1,noArrow:!0},r,(0,t.createElement)(He,{className:"components-tooltip__shortcut",shortcut:s}))))({grandchildren:w,isOver:l,position:n,text:o,shortcut:r});return b({child:v,eventHandlers:g,childrenWithPopover:E})},$e=function({icon:e,className:n,...o}){const r=["dashicon","dashicons","dashicons-"+e,n].filter(Boolean).join(" ");return(0,t.createElement)("span",de({className:r},o))},Ge=function({icon:e=null,size:n=24,...o}){if("string"==typeof e)return(0,t.createElement)($e,de({icon:e},o));if((0,t.isValidElement)(e)&&$e===e.type)return(0,t.cloneElement)(e,{...o});if("function"==typeof e)return e.prototype instanceof t.Component?(0,t.createElement)(e,{size:n,...o}):e({size:n,...o});if(e&&("svg"===e.type||e.type===I.SVG)){const r={width:n,height:n,...e.props,...o};return(0,t.createElement)(I.SVG,r)}return(0,t.isValidElement)(e)?(0,t.cloneElement)(e,{size:n,...o}):e},Qe=(0,t.forwardRef)((function({as:e="div",className:n,...o},r){return function({as:e="div",...n}){return"function"==typeof n.children?n.children(n):(0,t.createElement)(e,n)}({as:e,className:le()("components-visually-hidden",n),...o,ref:r})})),Ye=["onMouseDown","onClick"],Ze=(0,t.forwardRef)((function(e,n){const{href:o,target:r,isSmall:s,isPressed:i,isBusy:l,isDestructive:a,className:c,disabled:u,icon:d,iconPosition:p="left",iconSize:f,showTooltip:m,tooltipPosition:h,shortcut:g,label:v,children:w,text:y,variant:b,__experimentalIsFocusable:E,describedBy:S,...k}=function({isDefault:e,isPrimary:t,isSecondary:n,isTertiary:o,isLink:r,variant:s,...i}){let l=s;var a,c,u,d,p;return t&&(null!==(a=l)&&void 0!==a||(l="primary")),o&&(null!==(c=l)&&void 0!==c||(l="tertiary")),n&&(null!==(u=l)&&void 0!==u||(l="secondary")),e&&(fe()("Button isDefault prop",{since:"5.4",alternative:'variant="secondary"'}),null!==(d=l)&&void 0!==d||(l="secondary")),r&&(null!==(p=l)&&void 0!==p||(l="link")),{...i,variant:l}}(e),_=le()("components-button",c,{"is-secondary":"secondary"===b,"is-primary":"primary"===b,"is-small":s,"is-tertiary":"tertiary"===b,"is-pressed":i,"is-busy":l,"is-link":"link"===b,"is-destructive":a,"has-text":!!d&&!!w,"has-icon":!!d}),T=u&&!E,x=void 0===o||T?"button":"a",C="a"===x?{href:o,target:r}:{type:"button",disabled:T,"aria-pressed":i};if(u&&E){C["aria-disabled"]=!0;for(const e of Ye)k[e]=e=>{e.stopPropagation(),e.preventDefault()}}const I=!T&&(m&&v||g||!!v&&(!w||(0,se.isArray)(w)&&!w.length)&&!1!==m),L=S?(0,se.uniqueId)():null,R=k["aria-describedby"]||L,A=(0,t.createElement)(x,de({},C,k,{className:_,"aria-label":k["aria-label"]||v,"aria-describedby":R,ref:n}),d&&"left"===p&&(0,t.createElement)(Ge,{icon:d,size:f}),y&&(0,t.createElement)(t.Fragment,null,y),d&&"right"===p&&(0,t.createElement)(Ge,{icon:d,size:f}),w);return I?(0,t.createElement)(t.Fragment,null,(0,t.createElement)(qe,{text:S||v,shortcut:g,position:h},A),S&&(0,t.createElement)(Qe,null,(0,t.createElement)("span",{id:L},S))):(0,t.createElement)(t.Fragment,null,A,S&&(0,t.createElement)(Qe,null,(0,t.createElement)("span",{id:L},S)))}));function Xe({value:e,status:n,title:o,displayTransform:s,isBorderless:i=!1,disabled:l=!1,onClickRemove:a=se.noop,onMouseEnter:c,onMouseLeave:u,messages:d,termPosition:p,termsCount:f}){const m=(0,ae.useInstanceId)(Xe),h=le()("components-form-token-field__token",{"is-error":"error"===n,"is-success":"success"===n,"is-validating":"validating"===n,"is-borderless":i,"is-disabled":l}),g=s(e),v=(0,r.sprintf)(
/* translators: 1: term name, 2: term position in a set of terms, 3: total term set count. */
/* translators: 1: term name, 2: term position in a set of terms, 3: total term set count. */
(0,r.__)("%1$s (%2$s of %3$s)"),g,p,f);return(0,t.createElement)("span",{className:h,onMouseEnter:c,onMouseLeave:u,title:o},(0,t.createElement)("span",{className:"components-form-token-field__token-text",id:`components-form-token-field__token-text-${m}`},(0,t.createElement)(Qe,{as:"span"},v),(0,t.createElement)("span",{"aria-hidden":"true"},g)),(0,t.createElement)(Ze,{className:"components-form-token-field__remove-token",icon:ue,onClick:!l&&(()=>a({value:e})),label:d.remove,"aria-describedby":`components-form-token-field__token-text-${m}`}))}class Je extends t.Component{constructor(){super(...arguments),this.onChange=this.onChange.bind(this),this.bindInput=this.bindInput.bind(this)}focus(){this.input.focus()}hasFocus(){return this.input===this.input.ownerDocument.activeElement}bindInput(e){this.input=e}onChange(e){this.props.onChange({value:e.target.value})}render(){const{value:e,isExpanded:n,instanceId:o,selectedSuggestionIndex:r,className:s,...i}=this.props,l=e?e.length+1:0;return(0,t.createElement)("input",de({ref:this.bindInput,id:`components-form-token-input-${o}`,type:"text"},i,{value:e||"",onChange:this.onChange,size:l,className:le()(s,"components-form-token-field__input"),autoComplete:"off",role:"combobox","aria-expanded":n,"aria-autocomplete":"list","aria-owns":n?`components-form-token-suggestions-${o}`:void 0,"aria-activedescendant":-1!==r?`components-form-token-suggestions-${o}-${r}`:void 0,"aria-describedby":`components-form-token-suggestions-howto-${o}`}))}}const et=Je;var tt=n(2121),nt=n.n(tt);class ot extends t.Component{constructor(){super(...arguments),this.handleMouseDown=this.handleMouseDown.bind(this),this.bindList=this.bindList.bind(this)}componentDidUpdate(){this.props.selectedIndex>-1&&this.props.scrollIntoView&&this.list.children[this.props.selectedIndex]&&(this.scrollingIntoView=!0,nt()(this.list.children[this.props.selectedIndex],this.list,{onlyScrollIfNeeded:!0}),this.props.setTimeout((()=>{this.scrollingIntoView=!1}),100))}bindList(e){this.list=e}handleHover(e){return()=>{this.scrollingIntoView||this.props.onHover(e)}}handleClick(e){return()=>{this.props.onSelect(e)}}handleMouseDown(e){e.preventDefault()}computeSuggestionMatch(e){const t=this.props.displayTransform(this.props.match||"").toLocaleLowerCase();if(0===t.length)return null;const n=(e=this.props.displayTransform(e)).toLocaleLowerCase().indexOf(t);return{suggestionBeforeMatch:e.substring(0,n),suggestionMatch:e.substring(n,n+t.length),suggestionAfterMatch:e.substring(n+t.length)}}render(){return(0,t.createElement)("ul",{ref:this.bindList,className:"components-form-token-field__suggestions-list",id:`components-form-token-suggestions-${this.props.instanceId}`,role:"listbox"},(0,se.map)(this.props.suggestions,((e,n)=>{const o=this.computeSuggestionMatch(e),r=le()("components-form-token-field__suggestion",{"is-selected":n===this.props.selectedIndex});return(0,t.createElement)("li",{id:`components-form-token-suggestions-${this.props.instanceId}-${n}`,role:"option",className:r,key:null!=e&&e.value?e.value:this.props.displayTransform(e),onMouseDown:this.handleMouseDown,onClick:this.handleClick(e),onMouseEnter:this.handleHover(e),"aria-selected":n===this.props.selectedIndex},o?(0,t.createElement)("span",{"aria-label":this.props.displayTransform(e)},o.suggestionBeforeMatch,(0,t.createElement)("strong",{className:"components-form-token-field__suggestion-match"},o.suggestionMatch),o.suggestionAfterMatch):this.props.displayTransform(e))})))}}ot.defaultProps={match:"",onHover:()=>{},onSelect:()=>{},suggestions:Object.freeze([])};const rt=(0,ae.withSafeTimeout)(ot),st=(0,ae.createHigherOrderComponent)((e=>n=>(0,t.createElement)(e,de({},n,{speak:x.speak,debouncedSpeak:(0,ae.useDebounce)(x.speak,500)}))),"withSpokenMessages"),it={incompleteTokenValue:"",inputOffsetFromEnd:0,isActive:!1,isExpanded:!1,selectedSuggestionIndex:-1,selectedSuggestionScroll:!1};class lt extends t.Component{constructor(){super(...arguments),this.state=it,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.deleteTokenBeforeInput=this.deleteTokenBeforeInput.bind(this),this.deleteTokenAfterInput=this.deleteTokenAfterInput.bind(this),this.addCurrentToken=this.addCurrentToken.bind(this),this.onContainerTouched=this.onContainerTouched.bind(this),this.renderToken=this.renderToken.bind(this),this.onTokenClickRemove=this.onTokenClickRemove.bind(this),this.onSuggestionHovered=this.onSuggestionHovered.bind(this),this.onSuggestionSelected=this.onSuggestionSelected.bind(this),this.onInputChange=this.onInputChange.bind(this),this.bindInput=this.bindInput.bind(this),this.bindTokensAndInput=this.bindTokensAndInput.bind(this),this.updateSuggestions=this.updateSuggestions.bind(this)}componentDidUpdate(e){this.state.isActive&&!this.input.hasFocus()&&this.input.focus();const{suggestions:t,value:n}=this.props,o=!F()(t,e.suggestions);(o||n!==e.value)&&this.updateSuggestions(o)}static getDerivedStateFromProps(e,t){return e.disabled&&t.isActive?{isActive:!1,incompleteTokenValue:""}:null}bindInput(e){this.input=e}bindTokensAndInput(e){this.tokensAndInput=e}onFocus(e){const{__experimentalExpandOnFocus:t}=this.props;this.input.hasFocus()||e.target===this.tokensAndInput?this.setState({isActive:!0,isExpanded:!!t||this.state.isExpanded}):this.setState({isActive:!1}),"function"==typeof this.props.onFocus&&this.props.onFocus(e)}onBlur(){this.inputHasValidValue()?this.setState({isActive:!1}):this.setState(it)}onKeyDown(e){let t=!1;switch(e.keyCode){case ce.BACKSPACE:t=this.handleDeleteKey(this.deleteTokenBeforeInput);break;case ce.ENTER:t=this.addCurrentToken();break;case ce.LEFT:t=this.handleLeftArrowKey();break;case ce.UP:t=this.handleUpArrowKey();break;case ce.RIGHT:t=this.handleRightArrowKey();break;case ce.DOWN:t=this.handleDownArrowKey();break;case ce.DELETE:t=this.handleDeleteKey(this.deleteTokenAfterInput);break;case ce.SPACE:this.props.tokenizeOnSpace&&(t=this.addCurrentToken());break;case ce.ESCAPE:t=this.handleEscapeKey(e),e.stopPropagation()}t&&e.preventDefault()}onKeyPress(e){let t=!1;44===e.charCode&&(t=this.handleCommaKey()),t&&e.preventDefault()}onContainerTouched(e){e.target===this.tokensAndInput&&this.state.isActive&&e.preventDefault()}onTokenClickRemove(e){this.deleteToken(e.value),this.input.focus()}onSuggestionHovered(e){const t=this.getMatchingSuggestions().indexOf(e);t>=0&&this.setState({selectedSuggestionIndex:t,selectedSuggestionScroll:!1})}onSuggestionSelected(e){this.addNewToken(e)}onInputChange(e){const t=e.value,n=this.props.tokenizeOnSpace?/[ ,\t]+/:/[,\t]+/,o=t.split(n),r=(0,se.last)(o)||"";o.length>1&&this.addNewTokens(o.slice(0,-1)),this.setState({incompleteTokenValue:r},this.updateSuggestions),this.props.onInputChange(r)}handleDeleteKey(e){let t=!1;return this.input.hasFocus()&&this.isInputEmpty()&&(e(),t=!0),t}handleLeftArrowKey(){let e=!1;return this.isInputEmpty()&&(this.moveInputBeforePreviousToken(),e=!0),e}handleRightArrowKey(){let e=!1;return this.isInputEmpty()&&(this.moveInputAfterNextToken(),e=!0),e}handleUpArrowKey(){return this.setState(((e,t)=>({selectedSuggestionIndex:(0===e.selectedSuggestionIndex?this.getMatchingSuggestions(e.incompleteTokenValue,t.suggestions,t.value,t.maxSuggestions,t.saveTransform).length:e.selectedSuggestionIndex)-1,selectedSuggestionScroll:!0}))),!0}handleDownArrowKey(){return this.setState(((e,t)=>({selectedSuggestionIndex:(e.selectedSuggestionIndex+1)%this.getMatchingSuggestions(e.incompleteTokenValue,t.suggestions,t.value,t.maxSuggestions,t.saveTransform).length,selectedSuggestionScroll:!0}))),!0}handleEscapeKey(e){return this.setState({incompleteTokenValue:e.target.value,isExpanded:!1,selectedSuggestionIndex:-1,selectedSuggestionScroll:!1}),!0}handleCommaKey(){return this.inputHasValidValue()&&this.addNewToken(this.state.incompleteTokenValue),!0}moveInputToIndex(e){this.setState(((t,n)=>({inputOffsetFromEnd:n.value.length-Math.max(e,-1)-1})))}moveInputBeforePreviousToken(){this.setState(((e,t)=>({inputOffsetFromEnd:Math.min(e.inputOffsetFromEnd+1,t.value.length)})))}moveInputAfterNextToken(){this.setState((e=>({inputOffsetFromEnd:Math.max(e.inputOffsetFromEnd-1,0)})))}deleteTokenBeforeInput(){const e=this.getIndexOfInput()-1;e>-1&&this.deleteToken(this.props.value[e])}deleteTokenAfterInput(){const e=this.getIndexOfInput();e<this.props.value.length&&(this.deleteToken(this.props.value[e]),this.moveInputToIndex(e))}addCurrentToken(){let e=!1;const t=this.getSelectedSuggestion();return t?(this.addNewToken(t),e=!0):this.inputHasValidValue()&&(this.addNewToken(this.state.incompleteTokenValue),e=!0),e}addNewTokens(e){const t=(0,se.uniq)(e.map(this.props.saveTransform).filter(Boolean).filter((e=>!this.valueContainsToken(e))));if(t.length>0){const e=(0,se.clone)(this.props.value);e.splice.apply(e,[this.getIndexOfInput(),0].concat(t)),this.props.onChange(e)}}addNewToken(e){const{__experimentalExpandOnFocus:t,__experimentalValidateInput:n}=this.props;n(e)?(this.addNewTokens([e]),this.props.speak(this.props.messages.added,"assertive"),this.setState({incompleteTokenValue:"",selectedSuggestionIndex:-1,selectedSuggestionScroll:!1,isExpanded:!t}),this.state.isActive&&this.input.focus()):this.props.speak(this.props.messages.__experimentalInvalid,"assertive")}deleteToken(e){const t=this.props.value.filter((t=>this.getTokenValue(t)!==this.getTokenValue(e)));this.props.onChange(t),this.props.speak(this.props.messages.removed,"assertive")}getTokenValue(e){return"object"==typeof e?e.value:e}getMatchingSuggestions(e=this.state.incompleteTokenValue,t=this.props.suggestions,n=this.props.value,o=this.props.maxSuggestions,r=this.props.saveTransform){let s=r(e);const i=[],l=[];return 0===s.length?t=(0,se.difference)(t,n):(s=s.toLocaleLowerCase(),(0,se.each)(t,(e=>{const t=e.toLocaleLowerCase().indexOf(s);-1===n.indexOf(e)&&(0===t?i.push(e):t>0&&l.push(e))})),t=i.concat(l)),(0,se.take)(t,o)}getSelectedSuggestion(){if(-1!==this.state.selectedSuggestionIndex)return this.getMatchingSuggestions()[this.state.selectedSuggestionIndex]}valueContainsToken(e){return(0,se.some)(this.props.value,(t=>this.getTokenValue(e)===this.getTokenValue(t)))}getIndexOfInput(){return this.props.value.length-this.state.inputOffsetFromEnd}isInputEmpty(){return 0===this.state.incompleteTokenValue.length}inputHasValidValue(){return this.props.saveTransform(this.state.incompleteTokenValue).length>0}updateSuggestions(e=!0){const{__experimentalExpandOnFocus:t}=this.props,{incompleteTokenValue:n}=this.state,o=n.trim().length>1,s=this.getMatchingSuggestions(n),i=s.length>0,l={isExpanded:t||o&&i};if(e&&(l.selectedSuggestionIndex=-1,l.selectedSuggestionScroll=!1),this.setState(l),o){const{debouncedSpeak:e}=this.props;e(i?(0,r.sprintf)(
/* translators: %d: number of results. */
/* translators: %d: number of results. */
(0,r._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",s.length),s.length):(0,r.__)("No results."),"assertive")}}renderTokensAndInput(){const e=(0,se.map)(this.props.value,this.renderToken);return e.splice(this.getIndexOfInput(),0,this.renderInput()),e}renderToken(e,n,o){const r=this.getTokenValue(e),s=e.status?e.status:void 0,i=n+1,l=o.length;return(0,t.createElement)(Xe,{key:"token-"+r,value:r,status:s,title:e.title,displayTransform:this.props.displayTransform,onClickRemove:this.onTokenClickRemove,isBorderless:e.isBorderless||this.props.isBorderless,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,disabled:"error"!==s&&this.props.disabled,messages:this.props.messages,termsCount:l,termPosition:i})}renderInput(){const{autoCapitalize:e,autoComplete:n,maxLength:o,placeholder:r,value:s,instanceId:i}=this.props;let l={instanceId:i,autoCapitalize:e,autoComplete:n,placeholder:0===s.length?r:"",ref:this.bindInput,key:"input",disabled:this.props.disabled,value:this.state.incompleteTokenValue,onBlur:this.onBlur,isExpanded:this.state.isExpanded,selectedSuggestionIndex:this.state.selectedSuggestionIndex};return o&&s.length>=o||(l={...l,onChange:this.onInputChange}),(0,t.createElement)(et,l)}render(){const{disabled:e,label:n=(0,r.__)("Add item"),instanceId:o,className:s,__experimentalShowHowTo:i}=this.props,{isExpanded:l}=this.state,a=le()(s,"components-form-token-field__input-container",{"is-active":this.state.isActive,"is-disabled":e});let c={className:"components-form-token-field",tabIndex:"-1"};const u=this.getMatchingSuggestions();return e||(c=Object.assign({},c,{onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onFocus:this.onFocus})),(0,t.createElement)("div",c,(0,t.createElement)("label",{htmlFor:`components-form-token-input-${o}`,className:"components-form-token-field__label"},n),(0,t.createElement)("div",{ref:this.bindTokensAndInput,className:a,tabIndex:"-1",onMouseDown:this.onContainerTouched,onTouchStart:this.onContainerTouched},this.renderTokensAndInput(),l&&(0,t.createElement)(rt,{instanceId:o,match:this.props.saveTransform(this.state.incompleteTokenValue),displayTransform:this.props.displayTransform,suggestions:u,selectedIndex:this.state.selectedSuggestionIndex,scrollIntoView:this.state.selectedSuggestionScroll,onHover:this.onSuggestionHovered,onSelect:this.onSuggestionSelected})),i&&(0,t.createElement)("p",{id:`components-form-token-suggestions-howto-${o}`,className:"components-form-token-field__help"},this.props.tokenizeOnSpace?(0,r.__)("Separate with commas, spaces, or the Enter key."):(0,r.__)("Separate with commas or the Enter key.")))}}lt.defaultProps={suggestions:Object.freeze([]),maxSuggestions:100,value:Object.freeze([]),displayTransform:se.identity,saveTransform:e=>e.trim(),onChange:()=>{},onInputChange:()=>{},isBorderless:!1,disabled:!1,tokenizeOnSpace:!1,messages:{added:(0,r.__)("Item added."),removed:(0,r.__)("Item removed."),remove:(0,r.__)("Remove item"),__experimentalInvalid:(0,r.__)("Invalid item")},__experimentalExpandOnFocus:!1,__experimentalValidateInput:()=>!0,__experimentalShowHowTo:!0};const at=st((0,ae.withInstanceId)(lt));n(9027);const ct=({className:t,style:n,suggestions:o,multiple:r=!0,saveTransform:s=(e=>e.trim().replace(/\s/g,"-")),messages:i={},validateInput:l=(e=>o.includes(e)),label:a="",...c})=>(0,e.createElement)("div",{className:A()("wc-blocks-components-form-token-field-wrapper",t,{"single-selection":!r}),style:n},(0,e.createElement)(at,{label:a,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,__experimentalValidateInput:l,saveTransform:s,maxLength:r?void 0:1,suggestions:o,messages:i,...c})),ut=window.wp.url,dt=(0,s.getSettingWithCoercion)("isRenderingPhpTemplate",!1,te);function pt(e){dt?((e=e.replace(/(?:query-(?:\d+-)?page=(\d+))|(?:page\/(\d+))/g,"")).endsWith("?")&&(e=e.slice(0,-1)),window.location.href=e):window.history.replaceState({},"",e)}const ft=e=>{const t=(0,ut.getQueryArgs)(e);return(0,ut.addQueryArgs)(e,t)},mt=[{label:(0,e.createElement)(P,{key:5,rating:5,ratedProductsCount:null}),value:"5"},{label:(0,e.createElement)(P,{key:4,rating:4,ratedProductsCount:null}),value:"4"},{label:(0,e.createElement)(P,{key:3,rating:3,ratedProductsCount:null}),value:"3"},{label:(0,e.createElement)(P,{key:2,rating:2,ratedProductsCount:null}),value:"2"},{label:(0,e.createElement)(P,{key:1,rating:1,ratedProductsCount:null}),value:"1"}];n(8409);const ht=e=>"string"==typeof e,gt=JSON.parse('{"Y4":{"PW":{"Z":"list"},"lr":{"Z":"multiple"}}}');function vt(){return Math.floor(Math.random()*Date.now())}const wt=e=>e.trim().replace(/\s/g,"-").replace(/_/g,"-").replace(/-+/g,"-").replace(/[^a-zA-Z0-9-]/g,""),yt=(0,t.createContext)({}),bt="rating_filter",Et=e=>(0,r.sprintf)(/* translators: %s is referring to the average rating value */ /* translators: %s is referring to the average rating value */
(0,r.__)("Rated %s out of 5 filter added.","woocommerce"),e),St=e=>(0,r.sprintf)(/* translators: %s is referring to the average rating value */ /* translators: %s is referring to the average rating value */
(0,r.__)("Rated %s out of 5 filter added.","woocommerce"),e);(e=>{const t=document.body.querySelectorAll(_.join(",")),{Block:n,getProps:o,getErrorBoundaryProps:r,selector:s}=e;(({Block:e,getProps:t,getErrorBoundaryProps:n,selector:o,wrappers:r})=>{const s=document.body.querySelectorAll(o);r&&r.length>0&&Array.prototype.filter.call(s,(e=>!((e,t)=>Array.prototype.some.call(t,(t=>t.contains(e)&&!t.isSameNode(e))))(e,r))),T({Block:e,containers:s,getProps:t,getErrorBoundaryProps:n})})({Block:n,getProps:o,getErrorBoundaryProps:r,selector:s,wrappers:t}),Array.prototype.forEach.call(t,(t=>{t.addEventListener("wc-blocks_render_blocks_frontend",(()=>{(({Block:e,getProps:t,getErrorBoundaryProps:n,selector:o,wrapper:r})=>{const s=r.querySelectorAll(o);T({Block:e,containers:s,getProps:t,getErrorBoundaryProps:n})})({...e,wrapper:t})}))}))})({selector:".wp-block-woocommerce-rating-filter",Block:({attributes:n,isEditor:o,noRatingsNotice:i=null})=>{const l=(()=>{const{wrapper:e}=(0,t.useContext)(yt);return t=>{e&&e.current&&(e.current.hidden=!t)}})(),a=(0,s.getSettingWithCoercion)("isRenderingPhpTemplate",!1,te),[c,u]=(0,t.useState)(!1),[d]=W(),{results:p,isLoading:f}=ee({queryRating:!0,queryState:d,isEditor:o}),[m,h]=(0,t.useState)(n.isPreview?mt:[]),g=!n.isPreview&&f&&0===m.length,v=!n.isPreview&&f,w=(0,t.useMemo)((()=>((e="filter_rating")=>{const t=(n=e,window?(0,ut.getQueryArg)(window.location.href,n):null);var n;return t?ht(t)?t.split(","):t:[]})("rating_filter")),[]),[y,b]=(0,t.useState)(w),[E,S]=H("rating",w),[k,_]=(0,t.useState)(vt()),[T,I]=(0,t.useState)(!1),R="single"!==n.selectType,O=R?!g&&y.length<m.length:!g&&0===y.length,N=(0,t.useCallback)((e=>{o||(e&&!a&&S(e),(e=>{if(!window)return;if(0===e.length){const e=(0,ut.removeQueryArgs)(window.location.href,bt);return void(e!==ft(window.location.href)&&pt(e))}const t=(0,ut.addQueryArgs)(window.location.href,{[bt]:e.join(",")});t!==ft(window.location.href)&&pt(t)})(e))}),[o,S,a]);(0,t.useEffect)((()=>{n.showFilterButton||N(y)}),[n.showFilterButton,y,N]);const B=M((0,t.useMemo)((()=>E),[E])),D=function(e,n){const o=(0,t.useRef)();return(0,t.useEffect)((()=>{o.current===e||(o.current=e)}),[e,n]),o.current}(B);(0,t.useEffect)((()=>{F()(D,B)||F()(y,B)||b(B)}),[y,B,D]),(0,t.useEffect)((()=>{c||(S(w),u(!0))}),[S,c,u,w]),(0,t.useEffect)((()=>{if(f||n.isPreview)return;const t=!f&&U(p,"rating_counts")&&Array.isArray(p.rating_counts)?[...p.rating_counts].reverse():[];if(o&&0===t.length)return h(mt),void I(!0);const r=t.filter((e=>K(e)&&Object.keys(e).length>0)).map((t=>{var o;return{label:(0,e.createElement)(P,{key:null==t?void 0:t.rating,rating:null==t?void 0:t.rating,ratedProductsCount:n.showCounts?null==t?void 0:t.count:null}),value:null==t||null===(o=t.rating)||void 0===o?void 0:o.toString()}}));h(r),_(vt())}),[n.showCounts,n.isPreview,p,f,E,o]);const V=(0,t.useCallback)((e=>{const t=y.includes(e);if(!R){const n=t?[]:[e];return(0,x.speak)(t?St(e):Et(e)),void b(n)}if(t){const t=y.filter((t=>t!==e));return(0,x.speak)(St(e)),void b(t)}const n=[...y,e].sort(((e,t)=>Number(t)-Number(e)));(0,x.speak)(Et(e)),b(n)}),[y,R]);return(f||0!==m.length)&&(0,s.getSettingWithCoercion)("hasFilterableProducts",!1,te)?(l(!0),(0,e.createElement)(e.Fragment,null,T&&i,(0,e.createElement)("div",{className:A()("wc-block-rating-filter",`style-${n.displayStyle}`,{"is-loading":g})},"dropdown"===n.displayStyle?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(ct,{key:k,className:A()({"single-selection":!R,"is-loading":g}),style:{borderStyle:"none"},suggestions:m.filter((e=>!y.includes(e.value))).map((e=>e.value)),disabled:g,placeholder:(0,r.__)("Select Rating","woocommerce"),onChange:e=>{!R&&e.length>1&&(e=[e[e.length-1]]);const t=[e=e.map((e=>{const t=m.find((t=>t.value===e));return t?t.value:e})),y].reduce(((e,t)=>e.filter((e=>!t.includes(e)))));if(1===t.length)return V(t[0]);const n=[y,e].reduce(((e,t)=>e.filter((e=>!t.includes(e)))));1===n.length&&V(n[0])},value:y,displayTransform:t=>{const n={value:t,label:(0,e.createElement)(P,{key:Number(t),rating:Number(t),ratedProductsCount:0})},o=m.find((e=>e.value===t))||n,{label:r,value:s}=o;return Object.assign({},r,{toLocaleLowerCase:()=>s,substring:(e,t)=>0===e&&1===t?r:""})},saveTransform:wt,messages:{added:(0,r.__)("Rating filter added.","woocommerce"),removed:(0,r.__)("Rating filter removed.","woocommerce"),remove:(0,r.__)("Remove rating filter.","woocommerce"),__experimentalInvalid:(0,r.__)("Invalid rating filter.","woocommerce")}}),O&&(0,e.createElement)(C,{icon:L,size:30})):(0,e.createElement)(ne.CheckboxList,{className:"wc-block-rating-filter-list",options:m,checked:y,onChange:e=>{V(e.toString())},isLoading:g,isDisabled:v})),(0,e.createElement)("div",{className:"wc-block-rating-filter__actions"},(y.length>0||o)&&!g&&(0,e.createElement)(re,{onClick:()=>{b([]),S([]),N([])},screenReaderLabel:(0,r.__)("Reset rating filter","woocommerce")}),n.showFilterButton&&(0,e.createElement)(oe,{className:"wc-block-rating-filter__button",isLoading:g,disabled:g||v,onClick:()=>N(y)})))):(l(!1),null)},getProps:e=>{return{attributes:(t=e.dataset,{showFilterButton:"true"===(null==t?void 0:t.showFilterButton),showCounts:"true"===(null==t?void 0:t.showCounts),isPreview:!1,displayStyle:ht(null==t?void 0:t.displayStyle)&&t.displayStyle||gt.Y4.PW.Z,selectType:ht(null==t?void 0:t.selectType)&&t.selectType||gt.Y4.lr.Z}),isEditor:!1};var t}})})()})();